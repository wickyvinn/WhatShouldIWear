{% extends "layout.html" %}
{% block head %}
{{ super() }}
<script>
	window.JSData = {{ js_outfit_data | safe }};
</script>
	<script type="text/javascript" src="{{ JS_FILE_DIR }}/static/js/test.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="/static/js/bootstrap.min.js"></script>

<script>
$(function(){
  $('#tabbss').hide().fadeIn('3000');
			});
</script>

<style type="text/css"> 

	#panel {
		display:none;
	}
	.tag {
		margin-top:2px;
		margin-bottom:4px;
		text-align:center;
		font-size:small;
		font-family: "Gill Sans", "Gill Sans MT", Calibri, sans-serif;
	}
	.outfit_label {
		text-align:center;
		font-size:xx-large;
		padding:30px;
	}

	.title {
		text-align: center;
		font-size:xx-large;
		margin-top:20px;
		font-family: "Gill Sans", "Gill Sans MT", Calibri, sans-serif;
	}

	.panelheader {
		font-size:x-large;
		opacity: .9;
		/*padding:0px;*/
		font-style:oblique;
		/*border-bottom: 1px solid #dddddd;*/
		margin-bottom:2px;
		font-family: "Gill Sans", "Gill Sans MT", Calibri, sans-serif;

	}

	@font-face {
		font-family: 'Pacifico';
		font-style: normal;
		font-weight: 400;
		src: local('Pacifico Regular'), local('Pacifico-Regular'), url(http://themes.googleusercontent.com/static/fonts/pacifico/v4/yunJt0R8tCvMyj_V4xSjaXYhjbSpvc47ee6xR_80Hnw.woff) format('woff');
	}

	h4 {
		font: 400 35px/1.5 'Pacifico', Helvetica, sans-serif;
		color: #2b2b2b;
		text-shadow: 3px 3px 0px rgba(0,0,0,0.1), 7px 7px 0px rgba(0,0,0,0.05);
		text-align: center;
	}

	h5 {
		font: 400 20px/1.5 'Pacifico', Helvetica, sans-serif;
		color: #2b2b2b;
		text-shadow: 3px 3px 0px rgba(0,0,0,0.1), 7px 7px 0px rgba(0,0,0,0.05);
		text-align: left;
	}

	.product {
		opacity: .9;
		filter: alpha(opacity=60); 
		position: relative;
		float: left;
		margin-right: 20px;
		margin-bottom: 20px;
		cursor: pointer;
		
   }

	.product:after {
		display: block;
		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
	}
  
	.product:hover:after {
		content: url("/static/img/pink-heart-hi-buyme-resized.png");
		padding: 45px;
    	opacity: 1; 
    	filter: alpha(opacity=100); 
	}


	.garment {
		position: relative;
		float: left;
		margin-right: 20px;
		margin-bottom: 20px;
		cursor: pointer;
		
   }

	.garment:after {
		display: block;
		position: absolute;
		top: 4px;
		bottom: 0;
		left: 0;
		right: 0;
	}
  
	.garment:hover:after {
		content: url("/static/img/pink-heart-hi-clickme-resized.png");
		padding: 30px;
	}

	input[type=submit] {
		display:block;
		border:solid 1px #000000;
		color: #ffffff;
		height: 40px;
		width: 225px;
		font-size:small;
		background-color: #0088CC;
		text-align:center;
		margin-right: auto;
		margin-left:auto;
		font: 400 20px/1.5 'Pacifico', Helvetica, sans-serif;
	}

</style>




{% endblock %}
{% block content %}
<div class='title'><h4>why don't you try...</h4></div>
<!-------------------------------------------BEGINNING OF THE TABS ------------------------------- -->
	<div id=tabbss class="tabbable tabs-left">
		
		<ul class="nav nav-tabs span2" data-tabs="tabs">
			<li class="active"><a href="#tabs2-pane1" data-toggle="tab"><div class='outfit_label'>1</div></a></li>
			<li class=""><a href="#tabs2-pane2" data-toggle="tab"><div class='outfit_label'>2</div></a></li>
			<li class=""><a href="#tabs2-pane3" data-toggle="tab"><div class='outfit_label'>3</div></a></li>
		</ul>

	    <div class="tab-content span9">
			<div id="tabs2-pane1" class="tab-pane fade in active">
				<div id="top1"></div>
				<div id="bottoms1"></div>
				<div id="outerwear1"></div>
				
			</div>
			
			{% for i in range(2,4) %}
				<div id="tabs2-pane{{i}}" class="tab-pane fade">

					
					<div id="top{{i}}"></div>
					<div id="bottoms{{i}}"></div>
					<div id="outerwear{{i}}"></div>

				</div>
			{% endfor %} 
			
    	</div>

  </div>
<!-------------------------------------------BEGIN THE PANEL ------------------------------- -->
<br />
<br />
<div class="container">
	<div id="panel">
	</div>
</div>

<form action="/">>
	<input type="submit" value='BACK'>
</form>

<!-------------------------------------------END THE PANEL/HTML ------------------------------- -->
<script>

$(document).ready(function() {
    $(".garment").click(function() {
        $.get("product",{id: this.id}, function(data) {
					var js_product_data = eval(data); 
					panel(js_product_data);
				});
        if ($("#panel").is(":visible")) {
			$("#panel").hide();
		}
		else {
			$("#panel").fadeIn().show();
			var offset = $("#panel").offset({top:480});
			}
    });
});

var panel = function(js_product_data) {
	var whole = $('<div>')
	var panelheader = $('<div class="panelheader">')
	panelheader.html('<h5>oh so you like that huh</h5>')

	whole.append(panelheader)

	var row = $('<div class="row-fluid">')
	for (var i=0; i < js_product_data.length; i++) {
		var span2 = $('<div class="span2">')
		var product_object = $('<div class="tint">')
		var img = $('<img>')
		var a = $('<a>')
		var thing_id = js_product_data[i]['thing_id']
		var thing = $('#' + thing_id);
		
		// var tagtime = product_object.click(function() {
			
		var tag = $('<div class="tag">')
		tag.html(
		"<a href="+js_product_data[i]["url"]+">"
		+'<i class="icon-tag"></i></a>'+' <em>from</em> ')
		var cn = $("<a>")
		cn.attr('href',js_product_data[i]["companyname"])
		cn.html(js_product_data[i]["companyname"])
		tag.append(cn)

		tag.append(" | "+js_product_data[i]["price"])

		// $('#'+thing_id).append('pooppoop');
		// })

		product_object.attr('id', js_product_data[i]['thing_id'])
		a.attr('class', 'product')
		a.attr('href',js_product_data[i]['url'])
		

		img.attr('src',js_product_data[i]['img']);
		img.attr('class',"img-rounded");
		img.attr('thing_id', js_product_data[i]['img'])
		a.append(img);
		
		product_object.append(a)
		product_object.append(tag);
		span2.append(product_object)
		row.append(span2);
		
	}
	whole.append(row)
	$("#panel").html(whole);
}

var top1 = function(garment) {
	var span2 = $('<div class="span2">')
	var span3 = $('<div class="span3">')
	var span12 = $('<div class="span12">')
	var rowfluid = $('<div class="row-fluid">')
	var a = $('<a class="garment">')
	var img = $('<img>')

	img.attr('src',garment["search"][0]["img"]);
	a.attr('id',garment["id"])
	
	span3.append(rowfluid);
	rowfluid.append(span12);
	span12.append(a);
	a.append(img)

	var tag = $('<div class="tag">')
	var icon = $('<i class="icon-tag">')
	tag.append(icon)
	tag.html(garment["keywords"]
		+"<br />"
		+"<a href="+garment["search"][0]["url"]+">"
		+'<i class="icon-tag"></i></a>'+' <em>from</em> ')
	var cn = $("<a>")
	cn.attr('href',garment["search"][0]["companyname"])
	cn.html(garment["search"][0]["companyname"])
	tag.append(cn)

	tag.append(" | "+garment["search"][0]["price"])
	span12.append(tag)
	
	return span3;
}

var bottoms1 = function(bottoms, footwear) {

	var span2 = $('<div class="span2">')
	var span12 = $('<div class="span12">')
	var rowfluid = $('<div class="row-fluid">')
	var bottoms_img = $('<img>')
	var bottoms_a = $('<a class="garment">')

	bottoms_img.attr('src',bottoms["search"][0]['img']);
	bottoms_a.attr("id",bottoms['id']);

	span2.append(rowfluid);
	rowfluid.append(span12);
	
	var tag = $('<div class="tag">')
	tag.html(bottoms["keywords"]
		+"<br />"
		+"<a href="+bottoms["search"][0]["url"]+">"
		+'<i class="icon-tag"></i></a>'+' <em>from</em> ')	
	var cn = $("<a>")
	cn.attr('href',bottoms["search"][0]["companyname"])
	cn.html(bottoms["search"][0]["companyname"])
	tag.append(cn)
	tag.append(" | "+bottoms["search"][0]["price"])
	span12.append(tag)

	span12.append(bottoms_a);
	bottoms_a.append(bottoms_img);

	var inner_row_fluid = $('<div class="row-fluid">')
	var inner_span12 = $('<div class="span12">')
	var footwear_a = $('<a class="garment">')
	var footwear_img = $('<img>');

	footwear_img.attr('src',footwear["search"][0]['img']);
	footwear_a.attr('id',footwear['id'])

	span12.append(inner_row_fluid);
	inner_row_fluid.append(inner_span12);
	inner_span12.append(footwear_a)
	footwear_a.append(footwear_img);

	var tag = $('<div class="tag">')
	var icon = $('<i class="icon-search">')
	tag.append(icon)
	tag.html(footwear["keywords"]
		+"<br />"
		+"<a href="+footwear["search"][0]["url"]+">"
		+'<i class="icon-tag"></i></a>'+' <em>from</em> ')
	var cn = $("<a>")
	cn.attr('href',footwear["search"][0]["companyname"])
	cn.html(footwear["search"][0]["companyname"])
	tag.append(cn)

	tag.append(" | "+footwear["search"][0]["price"])
	span12.append(tag)
	

	return span2;
}

var js_outfit_data={{js_outfit_data | safe}};

for(var i = 1;i < 4;i++) {

	console.log("outfit number"+i);

	if (js_outfit_data[i][0].search) {
		top1_html = top1(js_outfit_data[i][0])
		$('#top'+i).append(top1_html);
	}
	else {
		top1_html = top1("http://data.whicdn.com/images/40458188/tumblr_m4m6b9qQ021r47aozo4_400_thumb.gif")
		$('#top'+i).append(top1_html);
	}

	if (js_outfit_data[i][1].search && js_outfit_data[i][2].search) {
		bottoms_footwear_html = bottoms1(js_outfit_data[i][1], js_outfit_data[i][2])
		$('#bottoms'+i).append(bottoms_footwear_html);	
	}
	else {
		bottoms_footwear_html = bottoms1("http://data.whicdn.com/images/40458188/tumblr_m4m6b9qQ021r47aozo4_400_thumb.gif","http://data.pusheen.com/aboutpusheen.gif")
		$('#bottoms'+i).append(bottoms_footwear_html);
	}

	if (js_outfit_data[i][3].search) {
		outerwear1_html = top1(js_outfit_data[i][3])
		$('#outerwear'+i).append(outerwear1_html);
	}
	else {
		outerwear1_html = top1("http://data.whicdn.com/images/40458188/tumblr_m4m6b9qQ021r47aozo4_400_thumb.gif")
		$('#outerwear'+i).append(outerwear1_html);
	}
}

$(document).ready(function() {
  
});



</script>
{% endblock %}
{% block footer %}
{{ super()}}
{% endblock %}